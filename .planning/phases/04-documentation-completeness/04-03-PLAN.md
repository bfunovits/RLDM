---
phase: 04-documentation-completeness
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified: []  # Will be determined dynamically based on assessment (specific files needing examples)
autonomous: true

must_haves:
  truths:
    - "All exported functions have working examples in documentation"
    - "Examples execute quickly (<5 seconds) and demonstrate basic usage"
  artifacts:
    - path: "R/*.R (specific files identified from assessment)"
      provides: "@examples sections for previously example-less functions"
      min_lines: 3  # At least minimal example
    - path: ".planning/phases/04-documentation-completeness/04-03-SUMMARY.md"
      provides: "Record of examples added and functions covered"
  key_links:
    - from: "Function documentation"
      to: "executable example code"
      via: "@examples section with valid R code"
      pattern: "@examples"
    - from: "Stochastic functions"
      to: "reproducible output"
      via: "set.seed() in examples"
      pattern: "set\\.seed"
---

<objective>
Add missing examples to exported functions and ensure all examples work correctly.

Purpose: Achieve 100% example coverage for all exported functions as required by DOCS-02.
Output: All exported functions have minimal working examples in their documentation.
</objective>

<execution_context>
@/home/bernd/.claude/get-shit-done/workflows/execute-plan.md
@/home/bernd/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-documentation-completeness/04-RESEARCH.md
@.planning/phases/04-documentation-completeness/04-02-SUMMARY.md
@NAMESPACE
</context>

<tasks>

<task type="auto">
  <name>Task 1: Identify functions missing examples</name>
  <files>.planning/phases/04-documentation-completeness/04-03-SUMMARY.md</files>
  <action>
1. Load documentation status from 04-02-SUMMARY.md (should indicate which functions have documentation).

2. Systematically scan all R files (excluding RcppExports.R) for exported functions:
   - For each function with `@export` tag, check if roxygen block contains `@examples`
   - Note: Some functions may have examples spread across `@example` or `@examples` (both valid)
   - Record functions lacking any example section

3. Also check example quality:
   - Examples should be minimal proof-of-concept (not comprehensive tutorials)
   - Should execute quickly (no long computations)
   - Stochastic functions should use `set.seed()` for reproducibility
   - No error demonstrations (only successful usage)

4. Save list to 04-03-SUMMARY.md with:
   - Functions missing examples entirely (with file paths)
   - Functions with examples that may need improvement (too long, missing set.seed, etc.)
   - Total count and specific files affected
  </action>
  <verify>04-03-SUMMARY.md exists with list of functions needing examples and their file paths</verify>
  <done>Comprehensive list of functions missing examples and those needing improvement with specific file paths</done>
</task>

<task type="auto">
  <name>Task 2: Add minimal working examples</name>
  <files>R/*.R (specific files identified in Task 1)</files>
  <action>
1. For each function missing examples from Task 1 list:
   - Locate R file and function definition
   - Add `@examples` section to roxygen block with minimal working code

2. Follow example patterns from existing documentation (see 04-RESEARCH.md Pattern 1):
   ```r
   #' @examples
   #' # Minimal proof-of-concept example
   #' set.seed(123)  # Only for stochastic functions
   #' result <- function_name(param1 = value1, param2 = value2)
   #' result
   ```

3. Guidelines for creating examples:
   - **Stochastic functions**: Use `set.seed(123)` before calls involving randomness (e.g., `sim()`, `r_model()`, `pfilter()`)
   - **Deterministic functions**: No need for `set.seed`
   - **Quick execution**: Examples should run in <5 seconds; avoid large data/complex models
   - **Simple parameters**: Use minimal dimensions (e.g., 2x2 matrices, small orders)
   - **Self-contained**: Examples should work without external data (use built-in or generated data)
   - **Demonstrate usage**: Show typical use case, not edge cases

4. Example templates for common function types:
   - **Model constructors**: `armamod(sys = lmfd(c(1, 0.5), 1), sigma_L = diag(1))`
   - **Estimation functions**: Use small simulated data
   - **Property functions**: Apply to simple model
   - **Plot functions**: Include basic plot call (but may skip graphical output in examples)

5. After adding examples, run `devtools::run_examples()` to test they work:
   ```r
   devtools::run_examples(run = TRUE)
   ```
   Fix any errors that appear.

6. Also run `devtools::check(document = TRUE, vignettes = FALSE)` to check for example warnings.

7. Record changes in 04-03-SUMMARY.md: which functions received examples, which specific files modified, any issues fixed.
  </action>
  <verify>devtools::run_examples() runs without errors; devtools::check() shows no example warnings</verify>
  <done>All exported functions have working examples; examples execute quickly and demonstrate basic usage</done>
</task>

</tasks>

<verification>
- Run `devtools::run_examples(run = TRUE)` and confirm no errors
- Run `devtools::check(document = TRUE, vignettes = FALSE)` and confirm no warnings about examples
- Spot-check added examples for quality (minimal, quick, reproducible)
</verification>

<success_criteria>
1. 100% example coverage for all exported functions (DOCS-02)
2. All examples execute without errors
3. Examples are minimal, quick to run, and demonstrate basic usage
</success_criteria>

<output>
After completion, create `.planning/phases/04-documentation-completeness/04-03-SUMMARY.md` with record of examples added.
</output>
