---
phase: 04-documentation-completeness
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified: []  # Will be determined dynamically based on assessment (specific files needing documentation)
autonomous: true

must_haves:
  truths:
    - "All exported functions have Roxygen documentation"
    - "@export tags are present for all exported functions"
  artifacts:
    - path: "R/*.R (specific files identified from assessment)"
      provides: "Complete roxygen documentation for previously undocumented exported functions"
      min_lines: 5  # At least some documentation added per function
    - path: ".planning/phases/04-documentation-completeness/04-02-SUMMARY.md"
      provides: "Record of documentation added and functions covered"
  key_links:
    - from: "NAMESPACE export statements"
      to: "R/*.R @export tags"
      via: "matching function names"
      pattern: "export\\(([^)]+)\\)"
    - from: "Related functions"
      to: "shared parameter documentation"
      via: "@inheritParams where appropriate"
      pattern: "@inheritParams"
---

<objective>
Add missing Roxygen documentation for exported functions and ensure @export tags are present.

Purpose: Achieve 100% documentation coverage for all exported functions as required by DOCS-01.
Output: All exported functions have complete roxygen documentation with @export tags.
</objective>

<execution_context>
@/home/bernd/.claude/get-shit-done/workflows/execute-plan.md
@/home/bernd/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-documentation-completeness/04-RESEARCH.md
@.planning/phases/04-documentation-completeness/04-01-SUMMARY.md
@NAMESPACE
</context>

<tasks>

<task type="auto">
  <name>Task 1: Identify undocumented exported functions</name>
  <files>.planning/phases/04-documentation-completeness/04-02-SUMMARY.md</files>
  <action>
1. Load assessment from 04-01-SUMMARY.md (should list functions missing documentation).

2. If assessment not detailed enough, perform systematic check:
   - Parse NAMESPACE to get list of exported functions (excluding S3method and import statements)
   - For each exported function, check if corresponding R file has roxygen documentation:
     * Search for function definition (`function_name <- function`)
     * Check if preceding lines contain `#'` roxygen comments
   - Record functions missing documentation

3. Also check for missing @export tags:
   - For each exported function, ensure roxygen block contains `@export`
   - Some functions may be exported via NAMESPACE but missing @export tag (roxygen will warn)

4. Save list to 04-02-SUMMARY.md with:
   - Undocumented exported functions (need roxygen docs) with file paths
   - Functions missing @export tags (need @export added) with file paths
   - Total count and specific files affected
   - Note: Internal (non-exported) helpers are deferred per CONTEXT.md decision to focus on exported functions first
  </action>
  <verify>04-02-SUMMARY.md exists with clear list of undocumented functions and their file paths</verify>
  <done>Comprehensive list of undocumented exported functions and missing @export tags with specific file paths</done>
</task>

<task type="auto">
  <name>Task 2: Add missing documentation and @export tags</name>
  <files>R/*.R (specific files identified in Task 1)</files>
  <action>
1. For each undocumented exported function from Task 1 list:
   - Locate R file containing function definition
   - Add roxygen documentation block before function following existing patterns:
     * Brief title (function name)
     * Description with mathematical context (1-2 sentences)
     * @param for each parameter (refer to existing similar functions for descriptions)
     * @return description of returned object
     * @export tag
     * Optional @family tag based on numeric prefix category (e.g., `@family 01_representations`)

2. Use @inheritParams where appropriate:
   - Identify functions sharing parameters (e.g., `est_ar_ols`, `est_ar_yw` share parameters with `est_ar`)
   - Add `@inheritParams fun_name` to reuse parameter documentation

3. For functions missing @export tags:
   - Add `@export` to existing roxygen block
   - Ensure roxygen block exists (if not, add minimal documentation)

4. Follow documentation patterns from research:
   - Brief mathematical context only (1-2 sentences)
   - Minimal essential sections (Description, Arguments, Value, Examples - added in next plan)
   - Use existing examples as templates for style

5. After modifications, run `devtools::document()` to regenerate .Rd files:
   ```r
   devtools::document()
   ```
   Fix any warnings about missing documentation.

6. Verify all exported functions now have documentation:
   - Run quick check: `devtools::check(document = TRUE, vignettes = FALSE)`
   - Should show no documentation warnings (may still have missing examples warnings)

7. Record changes in 04-02-SUMMARY.md: which functions documented, which specific files modified.
  </action>
  <verify>devtools::document() runs without errors; devtools::check() shows no documentation warnings (except possibly missing examples)</verify>
  <done>All exported functions have roxygen documentation with @export tags; documentation warnings resolved</done>
</task>

</tasks>

<verification>
- Run `devtools::check(document = TRUE, vignettes = FALSE)` and confirm no warnings about missing documentation
- Verify @export tags present for all exported functions (check NAMESPACE alignment)
- Check that modified R files have roxygen blocks preceding function definitions
</verification>

<success_criteria>
1. 100% Roxygen documentation coverage for all exported functions (DOCS-01)
2. @export tags present for all exported functions
3. No documentation warnings in `devtools::check()` (examples warnings acceptable)
</success_criteria>

<output>
After completion, create `.planning/phases/04-documentation-completeness/04-02-SUMMARY.md` with record of documentation added.
</output>
